class Setup extends Phaser.Scene{constructor(t,s){super("setup"),this.width=t,this.height=s}init(t){this.simulation=t}preload(){this.load.image("echelle","assets/scale.png")}create(){this.echelle=this.add.image(70,this.height-30,"echelle"),this.mapjs="",this.mouse=this.input.mousePointer,this.lastForm,this.print=!1,this.cancel=!1,this.now=0,this.buttons=[],this.add.rectangle(this.width-40,this.height/2,80,this.height,10066329),this.cursor=this.add.circle(this.width-40,40,5,16777215).setDepth(1);for(let t=0;t<4;t++){let s;s=t<2?16711680:0,t%2==0?this.buttons.push(this.add.rectangle(this.width-40,40+60*t,40,40,s).setInteractive().on("pointerdown",(()=>{this.now=t,this.cursor.setPosition(this.width-40,40+60*t)}))):this.buttons.push(this.add.circle(this.width-40,40+60*t,20,s).setInteractive().on("pointerdown",(()=>{this.now=t,this.cursor.setPosition(this.width-40,40+60*t)})))}for(let t=0;t<this.buttons.length;t++){const s=this.buttons[t];s.isStroked=1,s.strokeColor=0,s.lineWidth=2}}update(){let inputs=this.input.keyboard.addKeys({space:"space"});inputs.space.isDown&&(this.cancel=!0),this.mouse.isDown&&this.mouse.downX<this.width-80?(void 0!==this.lastForm&&this.lastForm.destroy(),this.cancel?this.print=!1:(0==this.print&&(this.mouse.worldDownX=this.mouse.worldX,this.mouse.worldDownY=this.mouse.worldY),this.deltaX=this.mouse.worldX-this.mouse.worldDownX,this.deltaY=this.mouse.worldY-this.mouse.worldDownY,0==this.now&&(this.centerX=this.mouse.worldDownX+this.deltaX/2,this.centerY=this.mouse.worldDownY+this.deltaY/2,this.lastForm=this.simulation.add.rectangle(this.centerX,this.centerY,this.deltaX,this.deltaY,16711680,.2),this.toPrint="new wallRect(this.simulation, this.centerX, this.centerY, this.deltaX, this.deltaY)",this.toAdd="new wallRect(scene, "+String(this.centerX)+","+String(this.centerY)+","+String(this.deltaX)+","+String(this.deltaY)+")"),1==this.now&&(this.radius=Math.sqrt(this.deltaX**2+this.deltaY**2),this.lastForm=this.simulation.add.circle(this.mouse.worldDownX,this.mouse.worldDownY,this.radius,16711680,.2),this.toPrint="new wallCircle(this.simulation, this.mouse.worldDownX, this.mouse.worldDownY, this.radius)",this.toAdd="new wallCircle(scene, "+String(this.mouse.worldDownX)+","+String(this.mouse.worldDownY)+","+String(this.radius)+")"),2==this.now&&(this.centerX=this.mouse.worldDownX+this.deltaX/2,this.centerY=this.mouse.worldDownY+this.deltaY/2,this.lastForm=this.simulation.add.rectangle(this.centerX,this.centerY,this.deltaX,this.deltaY,0,.5),this.toPrint="new markRect(this.simulation, this.centerX, this.centerY, this.deltaX, this.deltaY)",this.toAdd="new markRect(scene, "+String(this.centerX)+","+String(this.centerY)+","+String(this.deltaX)+","+String(this.deltaY)+")"),3==this.now&&(this.radius=Math.sqrt(this.deltaX**2+this.deltaY**2),this.lastForm=this.simulation.add.circle(this.mouse.worldDownX,this.mouse.worldDownY,this.radius,5592405,.5),this.toPrint="new markCircle(this.simulation, this.mouse.worldDownX, this.mouse.worldDownY, this.radius)",this.toAdd="new markCircle(scene, "+String(this.mouse.worldDownX)+","+String(this.mouse.worldDownY)+","+String(this.radius)+")"),this.print=!0)):this.cancel=!1,!this.print||this.mouse.isDown||this.cancel||(eval(this.toPrint),this.mapjs+=this.toAdd,this.mapjs+="\n",console.log(this.mapjs),this.print=!1),this.now}}